{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{useLanguage}from'../contexts/LanguageContext';import{Send,Download,Mail,User,Bot,Loader}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatPage=()=>{const{language}=useLanguage();const[messages,setMessages]=useState([]);const[inputMessage,setInputMessage]=useState('');const[isLoading,setIsLoading]=useState(false);const[sessionData,setSessionData]=useState({email:'',caseNumber:'',summary:''});const[showSessionForm,setShowSessionForm]=useState(false);const messagesEndRef=useRef(null);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};useEffect(()=>{scrollToBottom();},[messages]);const sendMessage=async()=>{if(!inputMessage.trim()||isLoading)return;const userMessage={id:Date.now(),text:inputMessage,sender:'user',timestamp:new Date().toISOString()};setMessages(prev=>[...prev,userMessage]);setInputMessage('');setIsLoading(true);try{const response=await fetch('http://localhost:5001/api/ask',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({question:inputMessage,language:language,history:messages.map(m=>`${m.sender}: ${m.text}`).join('\\n')})});const data=await response.json();if(response.ok){const botMessage={id:Date.now()+1,text:data.answer,sender:'bot',timestamp:new Date().toISOString(),documents:data.documents||[]};setMessages(prev=>[...prev,botMessage]);}else{const errorMessage={id:Date.now()+1,text:language==='en'?'Sorry, I encountered an error. Please try again or contact court staff for assistance.':'Lo siento, encontré un error. Por favor inténtalo de nuevo o contacta al personal del tribunal para obtener ayuda.',sender:'bot',timestamp:new Date().toISOString()};setMessages(prev=>[...prev,errorMessage]);}}catch(error){console.error('Error sending message:',error);const errorMessage={id:Date.now()+1,text:language==='en'?'Sorry, I cannot connect to the server. Please check your internet connection and try again.':'Lo siento, no puedo conectarme al servidor. Por favor verifica tu conexión a internet e inténtalo de nuevo.',sender:'bot',timestamp:new Date().toISOString()};setMessages(prev=>[...prev,errorMessage]);}finally{setIsLoading(false);}};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}};const submitSession=async()=>{if(!sessionData.email||!sessionData.summary){alert(language==='en'?'Please fill in all required fields.':'Por favor completa todos los campos requeridos.');return;}try{const response=await fetch('http://localhost:5001/api/submit-session',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:sessionData.email,case_number:sessionData.caseNumber,summary:sessionData.summary,language:language,documents:messages.filter(m=>m.documents).flatMap(m=>m.documents)})});if(response.ok){alert(language==='en'?'Session summary sent successfully! Check your email for details.':'¡Resumen de sesión enviado exitosamente! Revisa tu correo electrónico para más detalles.');setShowSessionForm(false);setSessionData({email:'',caseNumber:'',summary:''});}else{alert(language==='en'?'Error sending session summary. Please try again.':'Error al enviar el resumen de sesión. Por favor inténtalo de nuevo.');}}catch(error){console.error('Error submitting session:',error);alert(language==='en'?'Error submitting session. Please try again.':'Error al enviar la sesión. Por favor inténtalo de nuevo.');}};const formatTime=timestamp=>{return new Date(timestamp).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-2\",children:language==='en'?'Legal Assistant Chat':'Chat del Asistente Legal'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:language==='en'?'Ask questions about court procedures, forms, and legal processes. This is for informational purposes only and does not constitute legal advice.':'Haz preguntas sobre procedimientos judiciales, formularios y procesos legales. Esto es solo para fines informativos y no constituye asesoramiento legal.'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md h-96 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-6 space-y-4\",children:[messages.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-500 py-8\",children:[/*#__PURE__*/_jsx(Bot,{className:\"w-12 h-12 mx-auto mb-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"p\",{children:language==='en'?'Start a conversation by typing your question below.':'Inicia una conversación escribiendo tu pregunta abajo.'})]}),messages.map(message=>/*#__PURE__*/_jsx(\"div\",{className:`flex ${message.sender==='user'?'justify-end':'justify-start'}`,children:/*#__PURE__*/_jsxs(\"div\",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${message.sender==='user'?'bg-blue-600 text-white':'bg-gray-100 text-gray-900'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-1\",children:[message.sender==='user'?/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 mr-2\"}):/*#__PURE__*/_jsx(Bot,{className:\"w-4 h-4 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs opacity-75\",children:formatTime(message.timestamp)})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:message.text}),message.documents&&message.documents.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 pt-3 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold mb-2\",children:language==='en'?'Suggested Documents:':'Documentos Sugeridos:'}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1\",children:message.documents.map((doc,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs flex items-center\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-3 h-3 mr-1\"}),doc]},index))})]})]})},message.id)),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-start\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 text-gray-900 max-w-xs lg:max-w-md px-4 py-2 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Bot,{className:\"w-4 h-4 mr-2\"}),/*#__PURE__*/_jsx(Loader,{className:\"w-4 h-4 animate-spin\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm\",children:language==='en'?'Thinking...':'Pensando...'})]})})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:inputMessage,onChange:e=>setInputMessage(e.target.value),onKeyPress:handleKeyPress,placeholder:language==='en'?'Type your question here...':'Escribe tu pregunta aquí...',className:\"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\",rows:\"2\",disabled:isLoading}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,disabled:!inputMessage.trim()||isLoading,className:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:/*#__PURE__*/_jsx(Send,{className:\"w-5 h-5\"})})]})})]}),messages.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:language==='en'?'Session Summary':'Resumen de Sesión'}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowSessionForm(!showSessionForm),className:\"flex items-center text-blue-600 hover:text-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(Mail,{className:\"w-4 h-4 mr-2\"}),language==='en'?'Email Summary':'Enviar Resumen']})]}),showSessionForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:language==='en'?'Email Address *':'Dirección de Correo *'}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:sessionData.email,onChange:e=>setSessionData(prev=>({...prev,email:e.target.value})),className:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"your@email.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:language==='en'?'Case Number (Optional)':'Número de Caso (Opcional)'}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:sessionData.caseNumber,onChange:e=>setSessionData(prev=>({...prev,caseNumber:e.target.value})),className:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"ABC123456\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:language==='en'?'Summary *':'Resumen *'}),/*#__PURE__*/_jsx(\"textarea\",{value:sessionData.summary,onChange:e=>setSessionData(prev=>({...prev,summary:e.target.value})),className:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\",rows:\"3\",placeholder:language==='en'?'Brief summary of your legal questions...':'Breve resumen de tus preguntas legales...'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:submitSession,className:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\",children:language==='en'?'Send Summary':'Enviar Resumen'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSessionForm(false),className:\"border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors\",children:language==='en'?'Cancel':'Cancelar'})]})]})]})]})});};export default ChatPage;","map":{"version":3,"names":["React","useState","useRef","useEffect","useLanguage","Send","Download","Mail","User","Bot","Loader","jsx","_jsx","jsxs","_jsxs","ChatPage","language","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","sessionData","setSessionData","email","caseNumber","summary","showSessionForm","setShowSessionForm","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","sendMessage","trim","userMessage","id","Date","now","text","sender","timestamp","toISOString","prev","response","fetch","method","headers","body","JSON","stringify","question","history","map","m","join","data","json","ok","botMessage","answer","documents","errorMessage","error","console","handleKeyPress","e","key","shiftKey","preventDefault","submitSession","alert","case_number","filter","flatMap","formatTime","toLocaleTimeString","hour","minute","className","children","length","message","doc","index","ref","value","onChange","target","onKeyPress","placeholder","rows","disabled","onClick","type"],"sources":["/Users/hk04/Potential_Project/court-kiosk/frontend/src/pages/ChatPage.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useLanguage } from '../contexts/LanguageContext';\nimport { Send, Download, Mail, User, Bot, Loader } from 'lucide-react';\n\nconst ChatPage = () => {\n  const { language } = useLanguage();\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [sessionData, setSessionData] = useState({\n    email: '',\n    caseNumber: '',\n    summary: ''\n  });\n  const [showSessionForm, setShowSessionForm] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const sendMessage = async () => {\n    if (!inputMessage.trim() || isLoading) return;\n\n    const userMessage = {\n      id: Date.now(),\n      text: inputMessage,\n      sender: 'user',\n      timestamp: new Date().toISOString()\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setInputMessage('');\n    setIsLoading(true);\n\n    try {\n      const response = await fetch('http://localhost:5001/api/ask', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          question: inputMessage,\n          language: language,\n          history: messages.map(m => `${m.sender}: ${m.text}`).join('\\n')\n        })\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        const botMessage = {\n          id: Date.now() + 1,\n          text: data.answer,\n          sender: 'bot',\n          timestamp: new Date().toISOString(),\n          documents: data.documents || []\n        };\n\n        setMessages(prev => [...prev, botMessage]);\n      } else {\n        const errorMessage = {\n          id: Date.now() + 1,\n          text: language === 'en' \n            ? 'Sorry, I encountered an error. Please try again or contact court staff for assistance.'\n            : 'Lo siento, encontré un error. Por favor inténtalo de nuevo o contacta al personal del tribunal para obtener ayuda.',\n          sender: 'bot',\n          timestamp: new Date().toISOString()\n        };\n        setMessages(prev => [...prev, errorMessage]);\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n      const errorMessage = {\n        id: Date.now() + 1,\n        text: language === 'en' \n          ? 'Sorry, I cannot connect to the server. Please check your internet connection and try again.'\n          : 'Lo siento, no puedo conectarme al servidor. Por favor verifica tu conexión a internet e inténtalo de nuevo.',\n        sender: 'bot',\n        timestamp: new Date().toISOString()\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  const submitSession = async () => {\n    if (!sessionData.email || !sessionData.summary) {\n      alert(language === 'en' ? 'Please fill in all required fields.' : 'Por favor completa todos los campos requeridos.');\n      return;\n    }\n\n    try {\n      const response = await fetch('http://localhost:5001/api/submit-session', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          email: sessionData.email,\n          case_number: sessionData.caseNumber,\n          summary: sessionData.summary,\n          language: language,\n          documents: messages\n            .filter(m => m.documents)\n            .flatMap(m => m.documents)\n        })\n      });\n\n      if (response.ok) {\n        alert(language === 'en' \n          ? 'Session summary sent successfully! Check your email for details.'\n          : '¡Resumen de sesión enviado exitosamente! Revisa tu correo electrónico para más detalles.'\n        );\n        setShowSessionForm(false);\n        setSessionData({ email: '', caseNumber: '', summary: '' });\n      } else {\n        alert(language === 'en' \n          ? 'Error sending session summary. Please try again.'\n          : 'Error al enviar el resumen de sesión. Por favor inténtalo de nuevo.'\n        );\n      }\n    } catch (error) {\n      console.error('Error submitting session:', error);\n      alert(language === 'en' \n        ? 'Error submitting session. Please try again.'\n        : 'Error al enviar la sesión. Por favor inténtalo de nuevo.'\n      );\n    }\n  };\n\n  const formatTime = (timestamp) => {\n    return new Date(timestamp).toLocaleTimeString([], { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n        {/* Header */}\n        <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n            {language === 'en' ? 'Legal Assistant Chat' : 'Chat del Asistente Legal'}\n          </h1>\n          <p className=\"text-gray-600\">\n            {language === 'en' \n              ? 'Ask questions about court procedures, forms, and legal processes. This is for informational purposes only and does not constitute legal advice.'\n              : 'Haz preguntas sobre procedimientos judiciales, formularios y procesos legales. Esto es solo para fines informativos y no constituye asesoramiento legal.'\n            }\n          </p>\n        </div>\n\n        {/* Chat Container */}\n        <div className=\"bg-white rounded-lg shadow-md h-96 flex flex-col\">\n          {/* Messages */}\n          <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\n            {messages.length === 0 && (\n              <div className=\"text-center text-gray-500 py-8\">\n                <Bot className=\"w-12 h-12 mx-auto mb-4 text-gray-400\" />\n                <p>\n                  {language === 'en' \n                    ? 'Start a conversation by typing your question below.'\n                    : 'Inicia una conversación escribiendo tu pregunta abajo.'\n                  }\n                </p>\n              </div>\n            )}\n            \n            {messages.map((message) => (\n              <div\n                key={message.id}\n                className={`flex ${message.sender === 'user' ? 'justify-end' : 'justify-start'}`}\n              >\n                <div\n                  className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${\n                    message.sender === 'user'\n                      ? 'bg-blue-600 text-white'\n                      : 'bg-gray-100 text-gray-900'\n                  }`}\n                >\n                  <div className=\"flex items-center mb-1\">\n                    {message.sender === 'user' ? (\n                      <User className=\"w-4 h-4 mr-2\" />\n                    ) : (\n                      <Bot className=\"w-4 h-4 mr-2\" />\n                    )}\n                    <span className=\"text-xs opacity-75\">\n                      {formatTime(message.timestamp)}\n                    </span>\n                  </div>\n                  <p className=\"text-sm\">{message.text}</p>\n                  \n                  {message.documents && message.documents.length > 0 && (\n                    <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                      <p className=\"text-xs font-semibold mb-2\">\n                        {language === 'en' ? 'Suggested Documents:' : 'Documentos Sugeridos:'}\n                      </p>\n                      <div className=\"space-y-1\">\n                        {message.documents.map((doc, index) => (\n                          <div key={index} className=\"text-xs flex items-center\">\n                            <Download className=\"w-3 h-3 mr-1\" />\n                            {doc}\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n            \n            {isLoading && (\n              <div className=\"flex justify-start\">\n                <div className=\"bg-gray-100 text-gray-900 max-w-xs lg:max-w-md px-4 py-2 rounded-lg\">\n                  <div className=\"flex items-center\">\n                    <Bot className=\"w-4 h-4 mr-2\" />\n                    <Loader className=\"w-4 h-4 animate-spin\" />\n                    <span className=\"ml-2 text-sm\">\n                      {language === 'en' ? 'Thinking...' : 'Pensando...'}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Input */}\n          <div className=\"border-t border-gray-200 p-4\">\n            <div className=\"flex space-x-2\">\n              <textarea\n                value={inputMessage}\n                onChange={(e) => setInputMessage(e.target.value)}\n                onKeyPress={handleKeyPress}\n                placeholder={language === 'en' \n                  ? 'Type your question here...' \n                  : 'Escribe tu pregunta aquí...'\n                }\n                className=\"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                rows=\"2\"\n                disabled={isLoading}\n              />\n              <button\n                onClick={sendMessage}\n                disabled={!inputMessage.trim() || isLoading}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              >\n                <Send className=\"w-5 h-5\" />\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Session Summary */}\n        {messages.length > 0 && (\n          <div className=\"mt-6 bg-white rounded-lg shadow-md p-6\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">\n                {language === 'en' ? 'Session Summary' : 'Resumen de Sesión'}\n              </h3>\n              <button\n                onClick={() => setShowSessionForm(!showSessionForm)}\n                className=\"flex items-center text-blue-600 hover:text-blue-700 transition-colors\"\n              >\n                <Mail className=\"w-4 h-4 mr-2\" />\n                {language === 'en' ? 'Email Summary' : 'Enviar Resumen'}\n              </button>\n            </div>\n\n            {showSessionForm && (\n              <div className=\"space-y-4 p-4 bg-gray-50 rounded-lg\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    {language === 'en' ? 'Email Address *' : 'Dirección de Correo *'}\n                  </label>\n                  <input\n                    type=\"email\"\n                    value={sessionData.email}\n                    onChange={(e) => setSessionData(prev => ({ ...prev, email: e.target.value }))}\n                    className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"your@email.com\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    {language === 'en' ? 'Case Number (Optional)' : 'Número de Caso (Opcional)'}\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={sessionData.caseNumber}\n                    onChange={(e) => setSessionData(prev => ({ ...prev, caseNumber: e.target.value }))}\n                    className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"ABC123456\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    {language === 'en' ? 'Summary *' : 'Resumen *'}\n                  </label>\n                  <textarea\n                    value={sessionData.summary}\n                    onChange={(e) => setSessionData(prev => ({ ...prev, summary: e.target.value }))}\n                    className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\n                    rows=\"3\"\n                    placeholder={language === 'en' \n                      ? 'Brief summary of your legal questions...' \n                      : 'Breve resumen de tus preguntas legales...'\n                    }\n                  />\n                </div>\n                <div className=\"flex space-x-2\">\n                  <button\n                    onClick={submitSession}\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n                  >\n                    {language === 'en' ? 'Send Summary' : 'Enviar Resumen'}\n                  </button>\n                  <button\n                    onClick={() => setShowSessionForm(false)}\n                    className=\"border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors\"\n                  >\n                    {language === 'en' ? 'Cancel' : 'Cancelar'}\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ChatPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}